<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<nestedSchema>
		<name>НачисленныйНДС</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начисленный НДС</v8:content>
			</v8:item>
		</title>
		<schema>
			<dataSource>
				<name>ИсточникДанных1</name>
				<dataSourceType>Local</dataSourceType>
			</dataSource>
			<dataSet xsi:type="DataSetUnion">
				<name>ОбщиеДанные</name>
				<field xsi:type="DataSetFieldField">
					<dataPath>ВидНалогаНДС</dataPath>
					<field>ВидНалогаНДС</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ВидОперацииРеализации</dataPath>
					<field>ВидОперацииРеализации</field>
					<role>
						<dcscom:dimension>true</dcscom:dimension>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ГТД</dataPath>
					<field>ГТД</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>КодСтроки</dataPath>
					<field>КодСтроки</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>Контрагент</dataPath>
					<field>Контрагент</field>
					<role>
						<dcscom:dimension>true</dcscom:dimension>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>Налогоплательщик</dataPath>
					<field>Налогоплательщик</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>Организация</dataPath>
					<field>Организация</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>Раздел</dataPath>
					<field>Раздел</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СтавкаНДС</dataPath>
					<field>СтавкаНДС</field>
					<role>
						<dcscom:dimension>true</dcscom:dimension>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СтруктурнаяЕдиница</dataPath>
					<field>СтруктурнаяЕдиница</field>
					<role>
						<dcscom:dimension>true</dcscom:dimension>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ТМЗ</dataPath>
					<field>ТМЗ</field>
					<role>
						<dcscom:dimension>true</dcscom:dimension>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>Регистратор</dataPath>
					<field>Регистратор</field>
					<title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Документ</v8:content>
						</v8:item>
					</title>
					<role>
						<dcscom:periodNumber>1</dcscom:periodNumber>
						<dcscom:periodType>Main</dcscom:periodType>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СуммаНДС</dataPath>
					<field>СуммаНДС</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СуммаОборота</dataPath>
					<field>СуммаОборота</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СуммаБезНДС</dataPath>
					<field>СуммаБезНДС</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СуммаВДекларацию</dataPath>
					<field>СуммаВДекларацию</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>КодСтрокиРасшифровки</dataPath>
					<field>КодСтрокиРасшифровки</field>
					<useRestriction>
						<field>true</field>
					</useRestriction>
					<attributeUseRestriction>
						<field>true</field>
					</attributeUseRestriction>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ВидОперацииКорректировки</dataPath>
					<field>ВидОперацииКорректировки</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>РНН</dataPath>
					<field>РНН</field>
					<title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>РНН контрагента</v8:content>
						</v8:item>
					</title>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ИИН_БИН</dataPath>
					<field>ИИН_БИН</field>
					<title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ИИН/БИН контрагента</v8:content>
						</v8:item>
					</title>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ЕстьСФ</dataPath>
					<field>ЕстьСФ</field>
					<title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Есть СФ</v8:content>
						</v8:item>
					</title>
				</field>
				<item xsi:type="DataSetQuery">
					<name>Реализация</name>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидНалогаНДС</dataPath>
						<field>ВидНалогаНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидОперацииРеализации</dataPath>
						<field>ВидОперацииРеализации</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ГТД</dataPath>
						<field>ГТД</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>КодСтроки</dataPath>
						<field>КодСтроки</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Контрагент</dataPath>
						<field>Контрагент</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Налогоплательщик</dataPath>
						<field>Налогоплательщик</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Организация</dataPath>
						<field>Организация</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Раздел</dataPath>
						<field>Раздел</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СтавкаНДС</dataPath>
						<field>СтавкаНДС</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СтруктурнаяЕдиница</dataPath>
						<field>СтруктурнаяЕдиница</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ТМЗ</dataPath>
						<field>ТМЗ</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Регистратор</dataPath>
						<field>Регистратор</field>
						<title xsi:type="v8:LocalStringType">
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>Документ</v8:content>
							</v8:item>
						</title>
						<role>
							<dcscom:periodNumber>1</dcscom:periodNumber>
							<dcscom:periodType>Main</dcscom:periodType>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаНДС</dataPath>
						<field>СуммаНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаОборота</dataPath>
						<field>СуммаОборота</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаБезНДС</dataPath>
						<field>СуммаБезНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаВДекларацию</dataPath>
						<field>СуммаВДекларацию</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>КодСтрокиРасшифровки</dataPath>
						<field>КодСтрокиРасшифровки</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>РНН</dataPath>
						<field>РНН</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ИИН_БИН</dataPath>
						<field>ИИН_БИН</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ЕстьСФ</dataPath>
						<field>ЕстьСФ</field>
						<title xsi:type="v8:LocalStringType">
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>Есть СФ</v8:content>
							</v8:item>
						</title>
					</field>
					<dataSource>ИсточникДанных1</dataSource>
					<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ТЧ_Документов.Ссылка,
	ТЧ_Документов.ДокументОснование.Ссылка КАК Регистратор
ПОМЕСТИТЬ ВТ_ПодчиненныеДокументы
ИЗ
	Документ.СчетФактураВыданный.ДокументыОснования КАК ТЧ_Документов
ГДЕ
	ТЧ_Документов.Ссылка В
			(ВЫБРАТЬ
				СведенияСчетовФактурВыданныхОбороты.СчетФактура
			ИЗ
				РегистрНакопления.СведенияСчетовФактурВыданных.Обороты(&amp;НачПериода, &amp;КонПериода, , Налогоплательщик = &amp;Налогоплательщик) КАК СведенияСчетовФактурВыданныхОбороты
			СГРУППИРОВАТЬ ПО
				СведенияСчетовФактурВыданныхОбороты.СчетФактура)

ИНДЕКСИРОВАТЬ ПО
	Регистратор
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ПодчиненныеДокументы.Ссылка,
	ПодчиненныеДокументы.Регистратор КАК Регистратор
ПОМЕСТИТЬ вт_ДействующиеСФ
ИЗ
	ВТ_ПодчиненныеДокументы КАК ПодчиненныеДокументы
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СчетаФактурыПрекратившиеДействие.СрезПоследних(
				,
				СчетФактура В
					(ВЫБРАТЬ
						ВТ_ПодчиненныеДокументы.Ссылка
					ИЗ
						ВТ_ПодчиненныеДокументы КАК ВТ_ПодчиненныеДокументы)) КАК СчетаФактурыПрекратившиеДействие
		ПО ПодчиненныеДокументы.Ссылка = СчетаФактурыПрекратившиеДействие.СчетФактура
ГДЕ
	СчетаФактурыПрекратившиеДействие.СчетФактура ЕСТЬ NULL 

ИНДЕКСИРОВАТЬ ПО
	Регистратор
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВЫБОР
		КОГДА НДСОбороты.СтавкаНДС.МестоРеализацииНеРК ТОГДА "300.00.004"
		ИНАЧЕ ПОДСТРОКА(КодыСтрокДекларацииПоНДС.КодСтроки, 1, 10)
	КОНЕЦ КАК КодСтрокиРасшифровки, 
	НДСОбороты.ВидОперацииРеализации КАК ВидОперацииРеализации,
	НДСОбороты.ОборотПоРеализацииОборот КАК СуммаОборота,
	НДСОбороты.СуммаНДСОборот КАК СуммаНДС,
	"Реализация" КАК Раздел,
	НДСОбороты.СтавкаНДС,
	НДСОбороты.Регистратор,
	НДСОбороты.Контрагент,
	НДСОбороты.Контрагент.РНН КАК РНН,
	НДСОбороты.Контрагент.ИдентификационныйКодЛичности КАК ИИН_БИН,
	НДСОбороты.ТМЗ,
	ВЫБОР
		КОГДА НДСОбороты.СтавкаНДС.МестоРеализацииНеРК ТОГДА "300.00.004"
		ИНАЧЕ КодыСтрокДекларацииПоНДС.КодСтроки
	КОНЕЦ КАК КодСтроки, 
	НДСОбороты.СтруктурнаяЕдиница,
	НДСОбороты.СуммаБезНДСОборот КАК СуммаБезНДС,
	НДСОбороты.СуммаБезНДСОборот КАК СуммаВДекларацию,
	ВЫБОР
		КОГДА вт_ДействующиеСФ.Ссылка ЕСТЬ NULL 
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК ЕстьСФ
ИЗ
	РегистрНакопления.НДС.Обороты(
			&amp;НачалоПериода,
			&amp;КонецПериода,
			Регистратор,
			Налогоплательщик = &amp;Налогоплательщик
				И НЕ ВидНалогаНДС = ЗНАЧЕНИЕ(Перечисление.ВидыНДС.НДСОблагаемыйИмпорт)) КАК НДСОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КодыСтрокДекларацииПоНДС.СрезПоследних(&amp;КонецПериода, ) КАК КодыСтрокДекларацииПоНДС
		ПО НДСОбороты.ВидОперацииРеализации = КодыСтрокДекларацииПоНДС.ВидОперации
		ЛЕВОЕ СОЕДИНЕНИЕ вт_ДействующиеСФ КАК вт_ДействующиеСФ
		ПО НДСОбороты.Регистратор = вт_ДействующиеСФ.Регистратор
ГДЕ
	(ВЫБОР
		КОГДА НДСОбороты.СтавкаНДС.МестоРеализацииНеРК
			ТОГДА "300.00.004"
		ИНАЧЕ ПОДСТРОКА(КодыСтрокДекларацииПоНДС.КодСтроки, 1, 10)
	КОНЕЦ В (&amp;КодСтрокиРасшифровки)
	ИЛИ ВЫБОР
		КОГДА НДСОбороты.СтавкаНДС.МестоРеализацииНеРК
			ТОГДА "300.00.004"
		ИНАЧЕ КодыСтрокДекларацииПоНДС.КодСтроки
	КОНЕЦ В (&amp;КодСтрокиРасшифровки))			
</query>
				</item>
				<item xsi:type="DataSetQuery">
					<name>Корректировка</name>
					<field xsi:type="DataSetFieldField">
						<dataPath>Регистратор</dataPath>
						<field>Регистратор</field>
						<role>
							<dcscom:periodNumber>1</dcscom:periodNumber>
							<dcscom:periodType>Main</dcscom:periodType>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидНалогаНДС</dataPath>
						<field>ВидНалогаНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидОперацииКорректировки</dataPath>
						<field>ВидОперацииКорректировки</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидОперацииРеализации</dataPath>
						<field>ВидОперацииРеализации</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>КодСтроки</dataPath>
						<field>КодСтроки</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>КодСтрокиРасшифровки</dataPath>
						<field>КодСтрокиРасшифровки</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Контрагент</dataPath>
						<field>Контрагент</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Налогоплательщик</dataPath>
						<field>Налогоплательщик</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Организация</dataPath>
						<field>Организация</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Раздел</dataPath>
						<field>Раздел</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СтавкаНДС</dataPath>
						<field>СтавкаНДС</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СтруктурнаяЕдиница</dataPath>
						<field>СтруктурнаяЕдиница</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаБезНДС</dataPath>
						<field>СуммаБезНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаВДекларацию</dataPath>
						<field>СуммаВДекларацию</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаНДС</dataPath>
						<field>СуммаНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаОборота</dataPath>
						<field>СуммаОборота</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ТМЗ</dataPath>
						<field>ТМЗ</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>РНН</dataPath>
						<field>РНН</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ИИН_БИН</dataPath>
						<field>ИИН_БИН</field>
					</field>
					<dataSource>ИсточникДанных1</dataSource>
					<query>ВЫБРАТЬ
	ВЫБОР
		КОГДА КорректировкаНДСОбороты.СтавкаНДС.МестоРеализацииНеРК ТОГДА "300.00.004"
		ИНАЧЕ ПОДСТРОКА(КодыСтрокДекларацииПоНДС.КодСтроки, 1, 10)
	КОНЕЦ КАК КодСтрокиРасшифровки, 
	КорректировкаНДСОбороты.ВидОперацииКорректировки КАК ВидОперацииРеализации,
	КорректировкаНДСОбороты.СуммаКорректировкиОборотаОборот КАК СуммаОборота,
	КорректировкаНДСОбороты.СуммаНДСОборот КАК СуммаНДС,
	"Корректировка оборота" КАК Раздел,
	КорректировкаНДСОбороты.СтавкаНДС,
	КорректировкаНДСОбороты.Регистратор,
	КорректировкаНДСОбороты.Контрагент,
	КорректировкаНДСОбороты.Контрагент.РНН КАК РНН,
	КорректировкаНДСОбороты.Контрагент.ИдентификационныйКодЛичности КАК ИИН_БИН,
	КорректировкаНДСОбороты.ТМЗ,
	ВЫБОР
		КОГДА КорректировкаНДСОбороты.СтавкаНДС.МестоРеализацииНеРК ТОГДА "300.00.004"
		ИНАЧЕ КодыСтрокДекларацииПоНДС.КодСтроки
	КОНЕЦ КАК КодСтроки, 
	КорректировкаНДСОбороты.СтруктурнаяЕдиница,
	КорректировкаНДСОбороты.СуммаКорректировкиОборотаОборот КАК СуммаБезНДС,
	КорректировкаНДСОбороты.СуммаКорректировкиОборотаОборот КАК СуммаВДекларацию
ИЗ
	РегистрНакопления.КорректировкаНДС.Обороты(
			&amp;НачалоПериода,
			&amp;КонецПериода,
			Регистратор,
			Налогоплательщик = &amp;Налогоплательщик
				И НЕ ВидНалогаНДС = ЗНАЧЕНИЕ(Перечисление.ВидыНДС.НДСОблагаемыйИмпорт)) КАК КорректировкаНДСОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КодыСтрокДекларацииПоНДС.СрезПоследних(&amp;КонецПериода, ) КАК КодыСтрокДекларацииПоНДС
		ПО КорректировкаНДСОбороты.ВидОперацииКорректировки = КодыСтрокДекларацииПоНДС.ВидОперации
ГДЕ
	((ВЫБОР
		КОГДА КорректировкаНДСОбороты.СтавкаНДС.МестоРеализацииНеРК ТОГДА "300.00.004"
		ИНАЧЕ ПОДСТРОКА(КодыСтрокДекларацииПоНДС.КодСтроки, 1, 10)
	КОНЕЦ) В (&amp;КодСтрокиРасшифровки)
	ИЛИ (ВЫБОР
		КОГДА КорректировкаНДСОбороты.СтавкаНДС.МестоРеализацииНеРК ТОГДА "300.00.004"
		ИНАЧЕ КодыСтрокДекларацииПоНДС.КодСтроки
	КОНЕЦ) В (&amp;КодСтрокиРасшифровки))
				</query>
				</item>
			</dataSet>
			<totalField>
				<dataPath>СуммаБезНДС</dataPath>
				<expression>Сумма(СуммаБезНДС)</expression>
			</totalField>
			<totalField>
				<dataPath>СуммаВДекларацию</dataPath>
				<expression>Сумма(СуммаВДекларацию)</expression>
			</totalField>
			<totalField>
				<dataPath>СуммаНДС</dataPath>
				<expression>Сумма(СуммаНДС)</expression>
			</totalField>
			<totalField>
				<dataPath>СуммаОборота</dataPath>
				<expression>Сумма(СуммаОборота)</expression>
			</totalField>
			<parameter>
				<name>НачалоПериода</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Начало периода</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:dateTime</v8:Type>
					<v8:DateQualifiers>
						<v8:DateFractions>DateTime</v8:DateFractions>
					</v8:DateQualifiers>
				</valueType>
				<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
				<useRestriction>false</useRestriction>
			</parameter>
			<parameter>
				<name>КонецПериода</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Конец периода</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:dateTime</v8:Type>
					<v8:DateQualifiers>
						<v8:DateFractions>DateTime</v8:DateFractions>
					</v8:DateQualifiers>
				</valueType>
				<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
				<useRestriction>false</useRestriction>
			</parameter>
			<parameter>
				<name>Период</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Период</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:dateTime</v8:Type>
					<v8:DateQualifiers>
						<v8:DateFractions>DateTime</v8:DateFractions>
					</v8:DateQualifiers>
				</valueType>
				<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
				<useRestriction>false</useRestriction>
			</parameter>
			<parameter>
				<name>КодСтрокиРасшифровки</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Код строки расшифровки</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:string</v8:Type>
					<v8:StringQualifiers>
						<v8:Length>51</v8:Length>
						<v8:AllowedLength>Variable</v8:AllowedLength>
					</v8:StringQualifiers>
				</valueType>
				<useRestriction>true</useRestriction>
				<valueListAllowed>true</valueListAllowed>
			</parameter>
			<parameter>
				<name>Налогоплательщик</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Налогоплательщик</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type xmlns:d6p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d6p1:CatalogRef.Организации</v8:Type>
				</valueType>
				<value xsi:nil="true"/>
				<useRestriction>true</useRestriction>
			</parameter>
			<parameter>
				<name>КонПериода</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Кон периода</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:dateTime</v8:Type>
					<v8:DateQualifiers>
						<v8:DateFractions>DateTime</v8:DateFractions>
					</v8:DateQualifiers>
				</valueType>
				<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
				<useRestriction>true</useRestriction>
			</parameter>
			<parameter>
				<name>НачПериода</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Нач периода</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:dateTime</v8:Type>
					<v8:DateQualifiers>
						<v8:DateFractions>DateTime</v8:DateFractions>
					</v8:DateQualifiers>
				</valueType>
				<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
				<useRestriction>true</useRestriction>
			</parameter>
			<settingsVariant>
				<dcsset:name>Основной</dcsset:name>
				<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
				<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>КодСтроки</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>ВидОперацииРеализации</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>СтавкаНДС</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>Регистратор</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>СуммаБезНДС</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>СуммаВДекларацию</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>СуммаНДС</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:outputParameters>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ГоризонтальноеРасположениеОбщихИтогов</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">BeginAndEnd</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
							<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
						</dcscor:item>
					</dcsset:outputParameters>
					<dcsset:item xsi:type="dcsset:StructureItemGroup">
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>КодСтроки</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
						<dcsset:item xsi:type="dcsset:StructureItemGroup">
							<dcsset:order>
								<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
							</dcsset:order>
							<dcsset:selection>
								<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
							</dcsset:selection>
						</dcsset:item>
					</dcsset:item>
				</dcsset:settings>
			</settingsVariant>
		</schema>
		<settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows"/>
	</nestedSchema>
	<nestedSchema>
		<name>ЗачетныйНДС</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Зачетный НДС</v8:content>
			</v8:item>
		</title>
		<schema>
			<dataSource>
				<name>ИсточникДанных1</name>
				<dataSourceType>Local</dataSourceType>
			</dataSource>
			<dataSet xsi:type="DataSetUnion">
				<name>ОбщиеДанные</name>
				<field xsi:type="DataSetFieldField">
					<dataPath>ВидНалогаНДС</dataPath>
					<field>ВидНалогаНДС</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>КодСтроки</dataPath>
					<field>КодСтроки</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>Контрагент</dataPath>
					<field>Контрагент</field>
					<role>
						<dcscom:dimension>true</dcscom:dimension>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>Налогоплательщик</dataPath>
					<field>Налогоплательщик</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>Организация</dataPath>
					<field>Организация</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>Раздел</dataPath>
					<field>Раздел</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СтавкаНДС</dataPath>
					<field>СтавкаНДС</field>
					<role>
						<dcscom:dimension>true</dcscom:dimension>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СтруктурнаяЕдиница</dataPath>
					<field>СтруктурнаяЕдиница</field>
					<role>
						<dcscom:dimension>true</dcscom:dimension>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ТМЗ</dataPath>
					<field>ТМЗ</field>
					<role>
						<dcscom:dimension>true</dcscom:dimension>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>Регистратор</dataPath>
					<field>Регистратор</field>
					<title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Документ</v8:content>
						</v8:item>
					</title>
					<role>
						<dcscom:periodNumber>1</dcscom:periodNumber>
						<dcscom:periodType>Main</dcscom:periodType>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СуммаНДС</dataPath>
					<field>СуммаНДС</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>КодСтрокиРасшифровки</dataPath>
					<field>КодСтрокиРасшифровки</field>
					<useRestriction>
						<field>true</field>
					</useRestriction>
					<attributeUseRestriction>
						<field>true</field>
					</attributeUseRestriction>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ВидОперацииКорректировки</dataPath>
					<field>ВидОперацииКорректировки</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>РНН</dataPath>
					<field>РНН</field>
					<title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>РНН контрагента</v8:content>
						</v8:item>
					</title>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ВидОборота</dataPath>
					<field>ВидОборота</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ВидОперацииПоступления</dataPath>
					<field>ВидОперацииПоступления</field>
					<role>
						<dcscom:dimension>true</dcscom:dimension>
					</role>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СуммаУплаченныйНДС</dataPath>
					<field>СуммаУплаченныйНДС</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СчетФактура</dataPath>
					<field>СчетФактура</field>
					<title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Счет-фактура (для авансовых отчетов)</v8:content>
						</v8:item>
					</title>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СуммаОборота</dataPath>
					<field>СуммаОборота</field>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>СуммаВДекларации</dataPath>
					<field>СуммаВДекларации</field>
					<title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>НДС, с учетом вида оборота</v8:content>
						</v8:item>
					</title>
					<valueType>
						<v8:Type>xs:decimal</v8:Type>
						<v8:NumberQualifiers>
							<v8:Digits>15</v8:Digits>
							<v8:FractionDigits>2</v8:FractionDigits>
							<v8:AllowedSign>Any</v8:AllowedSign>
						</v8:NumberQualifiers>
					</valueType>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ИИН_БИН</dataPath>
					<field>ИИН_БИН</field>
					<title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ИИН/БИН контрагента</v8:content>
						</v8:item>
					</title>
				</field>
				<field xsi:type="DataSetFieldField">
					<dataPath>ЕстьСФ</dataPath>
					<field>ЕстьСФ</field>
					<title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Есть СФ</v8:content>
						</v8:item>
					</title>
				</field>
				<item xsi:type="DataSetQuery">
					<name>Приобретение</name>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидНалогаНДС</dataPath>
						<field>ВидНалогаНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>КодСтроки</dataPath>
						<field>КодСтроки</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Контрагент</dataPath>
						<field>Контрагент</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Налогоплательщик</dataPath>
						<field>Налогоплательщик</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Организация</dataPath>
						<field>Организация</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Раздел</dataPath>
						<field>Раздел</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СтавкаНДС</dataPath>
						<field>СтавкаНДС</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СтруктурнаяЕдиница</dataPath>
						<field>СтруктурнаяЕдиница</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ТМЗ</dataPath>
						<field>ТМЗ</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Регистратор</dataPath>
						<field>Регистратор</field>
						<title xsi:type="v8:LocalStringType">
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>Документ</v8:content>
							</v8:item>
						</title>
						<role>
							<dcscom:periodNumber>1</dcscom:periodNumber>
							<dcscom:periodType>Main</dcscom:periodType>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаНДС</dataPath>
						<field>СуммаНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>КодСтрокиРасшифровки</dataPath>
						<field>КодСтрокиРасшифровки</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>РНН</dataPath>
						<field>РНН</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидОборота</dataPath>
						<field>ВидОборота</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидОперацииПоступления</dataPath>
						<field>ВидОперацииПоступления</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаУплаченныйНДС</dataPath>
						<field>СуммаУплаченныйНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СчетФактура</dataPath>
						<field>СчетФактура</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаОборота</dataPath>
						<field>СуммаОборота</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаВДекларации</dataPath>
						<field>СуммаВДекларации</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ИИН_БИН</dataPath>
						<field>ИИН_БИН</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ЕстьСФ</dataPath>
						<field>ЕстьСФ</field>
						<title xsi:type="v8:LocalStringType">
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>Есть СФ</v8:content>
							</v8:item>
						</title>
					</field>
					<dataSource>ИсточникДанных1</dataSource>
					<query>ВЫБРАТЬ
	КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.Период КАК Период,
	КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.ВидОперации КАК ВидОперации,
	КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.КодСтроки КАК КодСтроки,
	ВидыОборотовПоРеализации.Ссылка КАК ВидОборота,
	ВЫБОР
		КОГДА КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.ВидОборота = ЗНАЧЕНИЕ(Перечисление.ВидыОборотовПоРеализации.ПустаяСсылка)
			ТОГДА 2
		ИНАЧЕ 1
	КОНЕЦ КАК Приоритет
ПОМЕСТИТЬ ВТ_Приоритет
ИЗ
	Перечисление.ВидыОборотовПоРеализации КАК ВидыОборотовПоРеализации
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КодыСтрокДекларацииПоНДСКЗачету.СрезПоследних(&amp;КонецПериода, ) КАК КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних
		ПО (КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.ВидОборота = ВидыОборотовПоРеализации.Ссылка
				ИЛИ КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.ВидОборота = ЗНАЧЕНИЕ(Перечисление.ВидыОборотовПоРеализации.ПустаяСсылка))

ИНДЕКСИРОВАТЬ ПО
	Приоритет,
	ВидОперации,
	ВидОборота
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаДохода.ВидОперацииПоступления КАК ВидОперацииПоступления,
	ТаблицаДохода.ВидОборота КАК ВидОборота,
	ДанныеОКодахДекларации.КодСтроки КАК КодСтроки
ПОМЕСТИТЬ ВТ_СведенияОкодахСтрокДекларации
ИЗ
	(ВЫБРАТЬ
		ТаблицаОпераций.ВидОперации КАК ВидОперацииПоступления,
		ТаблицаОпераций.ВидОборота КАК ВидОборота,
		МИНИМУМ(ТаблицаОпераций.Приоритет) КАК Приоритет
	ИЗ
		ВТ_Приоритет КАК ТаблицаОпераций
	
	СГРУППИРОВАТЬ ПО
		ТаблицаОпераций.ВидОперации,
		ТаблицаОпераций.ВидОборота) КАК ТаблицаДохода
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Приоритет КАК ДанныеОКодахДекларации
		ПО ТаблицаДохода.Приоритет = ДанныеОКодахДекларации.Приоритет
			И ТаблицаДохода.ВидОперацииПоступления = ДанныеОКодахДекларации.ВидОперации
			И ТаблицаДохода.ВидОборота = ДанныеОКодахДекларации.ВидОборота

ИНДЕКСИРОВАТЬ ПО
	ВидОперацииПоступления,
	ВидОборота,
	КодСтроки
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	НДСОбороты.ВидОперацииПоступления КАК ВидОперацииПоступления,
	НДСОбороты.УплаченныйНДСОборот КАК УплаченныйНДСОборот,
	НДСОбороты.СуммаНДСОборот КАК СуммаНДСОборот,
	НДСОбороты.СтавкаНДС,
	НДСОбороты.Регистратор,
	НДСОбороты.Контрагент,
	НДСОбороты.ТМЗ,
	НДСОбороты.СтруктурнаяЕдиница,
	НДСОбороты.СуммаБезНДСОборот КАК СуммаБезНДСОборот,
	НДСОбороты.ВидОборота КАК ВидОборота,
	НДСОбороты.СчетФактура
ПОМЕСТИТЬ вт_НДСОбороты
ИЗ
	РегистрНакопления.НДСКВозмещению.Обороты(
			&amp;НачалоПериода,
			&amp;КонецПериода,
			Регистратор,
			Налогоплательщик = &amp;Налогоплательщик
				И НЕ ВидНалогаНДС = ЗНАЧЕНИЕ(Перечисление.ВидыНДС.НДСОблагаемыйИмпорт)) КАК НДСОбороты

ИНДЕКСИРОВАТЬ ПО
	ВидОперацииПоступления,
	ВидОборота
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	СчетФактураПолученный.Ссылка,
	СчетФактураПолученный.ДокументОснование.Ссылка КАК Регистратор
ПОМЕСТИТЬ ВТ_ПодчиненныеДокументы
ИЗ
	Документ.СчетФактураПолученный.ДокументыОснования КАК СчетФактураПолученный
ГДЕ
	СчетФактураПолученный.Ссылка.Проведен = ИСТИНА
	И СчетФактураПолученный.ДокументОснование.Ссылка В
			(ВЫБРАТЬ
				вт_НДСОбороты.Регистратор
			ИЗ
				вт_НДСОбороты КАК вт_НДСОбороты)

ИНДЕКСИРОВАТЬ ПО
	Регистратор
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ПодчиненныеДокументы.Ссылка,
	ПодчиненныеДокументы.Регистратор КАК Регистратор
ПОМЕСТИТЬ вт_ДействующиеСФ
ИЗ
	ВТ_ПодчиненныеДокументы КАК ПодчиненныеДокументы
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СчетаФактурыПрекратившиеДействие.СрезПоследних(
				,
				СчетФактура В
					(ВЫБРАТЬ
						ВТ_ПодчиненныеДокументы.Ссылка
					ИЗ
						ВТ_ПодчиненныеДокументы КАК ВТ_ПодчиненныеДокументы)) КАК СчетаФактурыПрекратившиеДействие
		ПО ПодчиненныеДокументы.Ссылка = СчетаФактурыПрекратившиеДействие.СчетФактура
ГДЕ
	СчетаФактурыПрекратившиеДействие.СчетФактура ЕСТЬ NULL 

ИНДЕКСИРОВАТЬ ПО
	Регистратор
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ПОДСТРОКА(КодыСтрокДекларацииПоНДС.КодСтроки, 1, 10) КАК КодСтрокиРасшифровки,
	вт_НДСОбороты.ВидОперацииПоступления КАК ВидОперацииПоступления,
	вт_НДСОбороты.УплаченныйНДСОборот КАК СуммаУплаченныйНДС,
	вт_НДСОбороты.СуммаНДСОборот КАК СуммаНДС,
	"Приобретение" КАК Раздел,
	вт_НДСОбороты.СтавкаНДС,
	вт_НДСОбороты.Регистратор,
	вт_НДСОбороты.Контрагент,
	вт_НДСОбороты.Контрагент.РНН КАК РНН,
	вт_НДСОбороты.Контрагент.ИдентификационныйКодЛичности КАК ИИН_БИН,
	вт_НДСОбороты.ТМЗ,
	КодыСтрокДекларацииПоНДС.КодСтроки КАК КодСтроки,
	вт_НДСОбороты.СтруктурнаяЕдиница,
	вт_НДСОбороты.СуммаБезНДСОборот КАК СуммаОборота,
	ВЫБОР
		КОГДА &amp;РаздельныйМетод
				И вт_НДСОбороты.ВидОборота = ЗНАЧЕНИЕ(Перечисление.ВидыОборотовПоРеализации.Освобожденный)
			ТОГДА 0
		КОГДА &amp;РаздельныйМетод
				И вт_НДСОбороты.ВидОборота = ЗНАЧЕНИЕ(Перечисление.ВидыОборотовПоРеализации.Общий)
			ТОГДА ВЫРАЗИТЬ(вт_НДСОбороты.СуммаНДСОборот * &amp;УдельныйВес / 100 КАК ЧИСЛО(15, 3))
		ИНАЧЕ вт_НДСОбороты.СуммаНДСОборот
	КОНЕЦ КАК СуммаВДекларации,
	вт_НДСОбороты.ВидОборота,
	вт_НДСОбороты.СчетФактура,
	ВЫБОР
		КОГДА вт_ДействующиеСФ.Ссылка ЕСТЬ NULL 
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК ЕстьСФ
ИЗ
	вт_НДСОбороты КАК вт_НДСОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_СведенияОкодахСтрокДекларации КАК КодыСтрокДекларацииПоНДС
		ПО вт_НДСОбороты.ВидОперацииПоступления = КодыСтрокДекларацииПоНДС.ВидОперацииПоступления
			И вт_НДСОбороты.ВидОборота = КодыСтрокДекларацииПоНДС.ВидОборота
		ЛЕВОЕ СОЕДИНЕНИЕ вт_ДействующиеСФ КАК вт_ДействующиеСФ
		ПО вт_НДСОбороты.Регистратор = вт_ДействующиеСФ.Регистратор
			И (ВЫБОР
				КОГДА вт_НДСОбороты.Регистратор ССЫЛКА Документ.АвансовыйОтчет
					ТОГДА вт_НДСОбороты.СчетФактура = вт_ДействующиеСФ.Ссылка
				ИНАЧЕ ИСТИНА
			КОНЕЦ)
ГДЕ
	(ПОДСТРОКА(КодыСтрокДекларацииПоНДС.КодСтроки, 1, 10) В (&amp;КодСтрокиРасшифровки)
			ИЛИ КодыСтрокДекларацииПоНДС.КодСтроки В (&amp;КодСтрокиРасшифровки))</query>
				</item>
				<item xsi:type="DataSetQuery">
					<name>Корректировка</name>
					<field xsi:type="DataSetFieldField">
						<dataPath>Регистратор</dataPath>
						<field>Регистратор</field>
						<role>
							<dcscom:periodNumber>1</dcscom:periodNumber>
							<dcscom:periodType>Main</dcscom:periodType>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидНалогаНДС</dataPath>
						<field>ВидНалогаНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидОперацииКорректировки</dataPath>
						<field>ВидОперацииКорректировки</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>КодСтроки</dataPath>
						<field>КодСтроки</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>КодСтрокиРасшифровки</dataPath>
						<field>КодСтрокиРасшифровки</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Контрагент</dataPath>
						<field>Контрагент</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Налогоплательщик</dataPath>
						<field>Налогоплательщик</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Организация</dataPath>
						<field>Организация</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>Раздел</dataPath>
						<field>Раздел</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СтавкаНДС</dataPath>
						<field>СтавкаНДС</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СтруктурнаяЕдиница</dataPath>
						<field>СтруктурнаяЕдиница</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаНДС</dataPath>
						<field>СуммаНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ТМЗ</dataPath>
						<field>ТМЗ</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>РНН</dataPath>
						<field>РНН</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидОборота</dataPath>
						<field>ВидОборота</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ВидОперацииПоступления</dataPath>
						<field>ВидОперацииПоступления</field>
						<role>
							<dcscom:dimension>true</dcscom:dimension>
						</role>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаУплаченныйНДС</dataPath>
						<field>СуммаУплаченныйНДС</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаОборота</dataPath>
						<field>СуммаОборота</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>СуммаВДекларации</dataPath>
						<field>СуммаВДекларации</field>
					</field>
					<field xsi:type="DataSetFieldField">
						<dataPath>ИИН_БИН</dataPath>
						<field>ИИН_БИН</field>
					</field>
					<dataSource>ИсточникДанных1</dataSource>
					<query>ВЫБРАТЬ
	КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.Период КАК Период,
	КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.ВидОперации КАК ВидОперации,
	КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.КодСтроки КАК КодСтроки,
	ВидыОборотовПоРеализации.Ссылка КАК ВидОборота,
	ВЫБОР
		КОГДА КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.ВидОборота = ЗНАЧЕНИЕ(Перечисление.ВидыОборотовПоРеализации.ПустаяСсылка)
			ТОГДА 2
		ИНАЧЕ 1
	КОНЕЦ КАК Приоритет
ПОМЕСТИТЬ ВТ_Приоритет
ИЗ
	Перечисление.ВидыОборотовПоРеализации КАК ВидыОборотовПоРеализации
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КодыСтрокДекларацииПоНДСКЗачету.СрезПоследних(&amp;КонецПериода, ) КАК КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних
		ПО (КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.ВидОборота = ВидыОборотовПоРеализации.Ссылка
				ИЛИ КодыСтрокДекларацииПоНДСКЗачетуСрезПоследних.ВидОборота = ЗНАЧЕНИЕ(Перечисление.ВидыОборотовПоРеализации.ПустаяСсылка))

ИНДЕКСИРОВАТЬ ПО
	Приоритет,
	ВидОперации,
	ВидОборота
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаДохода.ВидОперацииПоступления КАК ВидОперацииПоступления,
	ТаблицаДохода.ВидОборота КАК ВидОборота,
	ДанныеОКодахДекларации.КодСтроки КАК КодСтроки
ПОМЕСТИТЬ ВТ_СведенияОкодахСтрокДекларации
ИЗ
	(ВЫБРАТЬ
		ТаблицаОпераций.ВидОперации КАК ВидОперацииПоступления,
		ТаблицаОпераций.ВидОборота КАК ВидОборота,
		МИНИМУМ(ТаблицаОпераций.Приоритет) КАК Приоритет
	ИЗ
		ВТ_Приоритет КАК ТаблицаОпераций
	
	СГРУППИРОВАТЬ ПО
		ТаблицаОпераций.ВидОперации,
		ТаблицаОпераций.ВидОборота) КАК ТаблицаДохода
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Приоритет КАК ДанныеОКодахДекларации
		ПО ТаблицаДохода.Приоритет = ДанныеОКодахДекларации.Приоритет
			И ТаблицаДохода.ВидОперацииПоступления = ДанныеОКодахДекларации.ВидОперации
			И ТаблицаДохода.ВидОборота = ДанныеОКодахДекларации.ВидОборота

ИНДЕКСИРОВАТЬ ПО
	ВидОперацииПоступления,
	ВидОборота,
	КодСтроки
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ПОДСТРОКА(КодыСтрокДекларацииПоНДС.КодСтроки, 1, 10) КАК КодСтрокиРасшифровки,
	НДСОбороты.ВидОперацииКорректировки КАК ВидОперацииПоступления,
	НДСОбороты.УплаченныйНДСОборот КАК СуммаУплаченныйНДС,
	НДСОбороты.СуммаНДСОборот КАК СуммаНДС,
	"Корректировка оборота" КАК Раздел,
	НДСОбороты.СтавкаНДС,
	НДСОбороты.Регистратор,
	НДСОбороты.Контрагент,
	НДСОбороты.Контрагент.РНН КАК РНН,
	НДСОбороты.Контрагент.ИдентификационныйКодЛичности КАК ИИН_БИН,
	НДСОбороты.ТМЗ,
	КодыСтрокДекларацииПоНДС.КодСтроки КАК КодСтроки,
	НДСОбороты.СтруктурнаяЕдиница,
	НДСОбороты.СуммаКорректировкиОборотаОборот КАК СуммаОборота,
	ВЫБОР
		КОГДА &amp;РаздельныйМетод
				И НДСОбороты.ВидОборота = ЗНАЧЕНИЕ(Перечисление.ВидыОборотовПоРеализации.Освобожденный)
			ТОГДА 0
		КОГДА &amp;РаздельныйМетод
				И НДСОбороты.ВидОборота = ЗНАЧЕНИЕ(Перечисление.ВидыОборотовПоРеализации.Общий)
			ТОГДА НДСОбороты.СуммаНДСОборот * &amp;УдельныйВес / 100
		ИНАЧЕ НДСОбороты.СуммаНДСОборот
	КОНЕЦ КАК СуммаВДекларации,
	НДСОбороты.ВидОборота
ИЗ
	РегистрНакопления.КорректировкаНДСКВозмещению.Обороты(
			&amp;НачалоПериода,
			&amp;КонецПериода,
			Регистратор,
			Налогоплательщик = &amp;Налогоплательщик
				И НЕ ВидНалогаНДС = ЗНАЧЕНИЕ(Перечисление.ВидыНДС.НДСОблагаемыйИмпорт)) КАК НДСОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_СведенияОкодахСтрокДекларации КАК КодыСтрокДекларацииПоНДС
		ПО НДСОбороты.ВидОперацииКорректировки = КодыСтрокДекларацииПоНДС.ВидОперацииПоступления
			И НДСОбороты.ВидОборота = КодыСтрокДекларацииПоНДС.ВидОборота
ГДЕ
	(ПОДСТРОКА(КодыСтрокДекларацииПоНДС.КодСтроки, 1, 10) В (&amp;КодСтрокиРасшифровки)
			ИЛИ КодыСтрокДекларацииПоНДС.КодСтроки В (&amp;КодСтрокиРасшифровки))</query>
				</item>
			</dataSet>
			<totalField>
				<dataPath>СуммаНДС</dataPath>
				<expression>Сумма(СуммаНДС)</expression>
			</totalField>
			<totalField>
				<dataPath>СуммаОборота</dataPath>
				<expression>Сумма(СуммаОборота)</expression>
			</totalField>
			<totalField>
				<dataPath>СуммаУплаченныйНДС</dataPath>
				<expression>Сумма(СуммаУплаченныйНДС)</expression>
			</totalField>
			<totalField>
				<dataPath>СуммаВДекларации</dataPath>
				<expression>Сумма(СуммаВДекларации)</expression>
			</totalField>
			<parameter>
				<name>НачалоПериода</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Начало периода</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:dateTime</v8:Type>
					<v8:DateQualifiers>
						<v8:DateFractions>DateTime</v8:DateFractions>
					</v8:DateQualifiers>
				</valueType>
				<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
				<useRestriction>false</useRestriction>
			</parameter>
			<parameter>
				<name>КонецПериода</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Конец периода</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:dateTime</v8:Type>
					<v8:DateQualifiers>
						<v8:DateFractions>DateTime</v8:DateFractions>
					</v8:DateQualifiers>
				</valueType>
				<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
				<useRestriction>false</useRestriction>
			</parameter>
			<parameter>
				<name>Период</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Период</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:dateTime</v8:Type>
					<v8:DateQualifiers>
						<v8:DateFractions>DateTime</v8:DateFractions>
					</v8:DateQualifiers>
				</valueType>
				<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
				<useRestriction>false</useRestriction>
			</parameter>
			<parameter>
				<name>КодСтрокиРасшифровки</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Код строки расшифровки</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:string</v8:Type>
					<v8:StringQualifiers>
						<v8:Length>15</v8:Length>
						<v8:AllowedLength>Variable</v8:AllowedLength>
					</v8:StringQualifiers>
				</valueType>
				<useRestriction>true</useRestriction>
				<valueListAllowed>true</valueListAllowed>
			</parameter>
			<parameter>
				<name>Налогоплательщик</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Налогоплательщик</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type xmlns:d6p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d6p1:CatalogRef.Организации</v8:Type>
				</valueType>
				<value xsi:nil="true"/>
				<useRestriction>true</useRestriction>
			</parameter>
			<parameter>
				<name>РаздельныйМетод</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Раздельный метод</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:boolean</v8:Type>
				</valueType>
				<value xsi:type="xs:boolean">false</value>
				<useRestriction>true</useRestriction>
			</parameter>
			<parameter>
				<name>УдельныйВес</name>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Удельный вес</v8:content>
					</v8:item>
				</title>
				<valueType>
					<v8:Type>xs:decimal</v8:Type>
					<v8:NumberQualifiers>
						<v8:Digits>0</v8:Digits>
						<v8:FractionDigits>0</v8:FractionDigits>
						<v8:AllowedSign>Any</v8:AllowedSign>
					</v8:NumberQualifiers>
				</valueType>
				<value xsi:type="xs:decimal">0</value>
				<useRestriction>true</useRestriction>
			</parameter>
			<settingsVariant>
				<dcsset:name>Основной</dcsset:name>
				<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
				<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>КодСтроки</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>ВидОперацииРеализации</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>СтавкаНДС</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>Регистратор</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>СуммаБезНДС</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>СуммаВДекларацию</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>СуммаНДС</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:outputParameters>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ГоризонтальноеРасположениеОбщихИтогов</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">BeginAndEnd</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
							<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
						</dcscor:item>
					</dcsset:outputParameters>
					<dcsset:item xsi:type="dcsset:StructureItemGroup">
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>КодСтроки</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
						<dcsset:item xsi:type="dcsset:StructureItemGroup">
							<dcsset:order>
								<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
							</dcsset:order>
							<dcsset:selection>
								<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
							</dcsset:selection>
						</dcsset:item>
					</dcsset:item>
				</dcsset:settings>
			</settingsVariant>
		</schema>
		<settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows"/>
	</nestedSchema>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>РасположениеИтогов</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">BeginAndEnd</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ГоризонтальноеРасположениеОбщихИтогов</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">BeginAndEnd</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВертикальноеРасположениеОбщихИтогов</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">BeginAndEnd</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>