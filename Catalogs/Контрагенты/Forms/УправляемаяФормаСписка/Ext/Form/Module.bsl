
////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ
&НаКлиенте
Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
	Если ИмяСобытия = "ЗакрытиеФормыПоиска"
		И Источник = ЭтаФорма Тогда
	КонецЕсли;
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ФОРМЫ
////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ КОМАНДНЫХ ПАНЕЛЕЙ ФОРМЫ

// Процедура - обработчик события нажатие по кнопке Отчет командной панели ДействияФормы.
&НаКлиенте
Процедура ОтчетПоВыбранному(Команда)
	ОтчетыНаСервере("ОтчетПоВыбранному");
КонецПроцедуры

&НаКлиенте
Процедура ОтчетПоВсем(Команда)
	ОтчетыНаСервере("ОтчетПоВсем");
КонецПроцедуры

&НаСервере
Процедура ОтчетыНаСервере(ТипОтчета)
	КонтрагентОтчета = Неопределено;
	Если (ТипОтчета = "ОтчетПоВыбранному") И (Элементы.Список.ТекущиеДанные <> Неопределено И ЗначениеЗаполнено(Элементы.Список.ТекущиеДанные.Ссылка)) Тогда
		КонтрагентОтчета = Элементы.Список.ТекущиеДанные.Ссылка;
	ИначеЕсли (ТипОтчета = "ОтчетПоВсем") Тогда
		КонтрагентОтчета = Справочники.Контрагенты.ПустаяСсылка();
	КонецЕсли;
	Если КонтрагентОтчета <> Неопределено Тогда
		Отчет = Отчеты.ОтчетПоДаннымКонтрагента.Создать();
		Отчет.КонтрагентОтчета = КонтрагентОтчета;
		Отчет.ДатаОтчета = ТекущаяДата();
		ФормаОтчета = Отчет.ПолучитьФорму();
		Отчет.СформироватьОтчет(ФормаОтчета.Элементы.ПолеТабличногоДокумента);		
		ФормаОтчета.Открыть();
	КонецЕсли;
КонецПроцедуры


//УНИВЕРСАЛЬНЫЙ ПОИСК ОБЪЕКТОВ
///////////////////////////////////////////////////////////////////////////////

// Процедура - обработчик события "ПриАктивизацииСтроки" элемента формы СправочникСписок.
&НаКлиенте
Процедура СписокПриАктивизацииСтроки(Элемент)
	Элементы.Дерево.ТекущийЭлемент = Элементы.Список.ТекущийРодитель;
КонецПроцедуры
