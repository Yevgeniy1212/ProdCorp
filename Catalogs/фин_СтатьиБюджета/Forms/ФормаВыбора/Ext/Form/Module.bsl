
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если Параметры.Свойство("ВСпискеПоИерархии") Тогда
		НовыйЭлемент = Список.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
		НовыйЭлемент.Использование = Истина;
		НовыйЭлемент.ВидСравнения = ВидСравненияКомпоновкиДанных.ВСпискеПоИерархии;
		НовыйЭлемент.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("Ссылка");
		НовыйЭлемент.ПравоеЗначение = Параметры.ВСпискеПоИерархии;
	КонецЕсли;
	Если Параметры.Свойство("Отбор") И Параметры.Отбор.Свойство("Владелец",Бюджет) Тогда
		Элементы.Бюджет.ТолькоПросмотр=Истина;
	КонецЕсли;
	фин_БюджетированиеОбщегоНазначения.НастроитьОформлениеТабличногоПоля(Элементы.Дерево);
	фин_БюджетированиеОбщегоНазначения.НастроитьОформлениеТабличногоПоля(Элементы.Список);
КонецПроцедуры

&НаКлиенте
Процедура БюджетПриИзменении(Элемент)
	БюджетПриИзмененииНаСервере();
КонецПроцедуры

&НаСервере
Процедура БюджетПриИзмененииНаСервере()
	ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбора(
		Список.КомпоновщикНастроек.Настройки.Отбор, "Владелец", Бюджет, , , ЗначениеЗаполнено(Бюджет));
	ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбора(
		Дерево.КомпоновщикНастроек.Настройки.Отбор, "Владелец", Бюджет, , , ЗначениеЗаполнено(Бюджет));
КонецПроцедуры
