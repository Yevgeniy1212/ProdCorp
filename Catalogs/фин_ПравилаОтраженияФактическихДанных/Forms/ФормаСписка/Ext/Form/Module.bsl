
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	фин_БюджетированиеОбщегоНазначения.НастроитьОформлениеТабличногоПоля(Элементы.Список);
	НастроитьРазрезыБюджета(фин_ОбщегоНазначенияВызовСервераПовтИсп.ЗначениеПеременной("ПолучитьПолныйСписокРазрезов"));
КонецПроцедуры

//настраивает дополнительные разрезы
//
&НаСервере
Процедура НастроитьРазрезыБюджета(ПереченьРазрезов)
	ОбработанныеРазрезы=Новый Массив;
	Для Каждого Разрез Из ПереченьРазрезов Цикл
		//ИмяРазреза = фин_ПроцедурыМеханизмовБюджетирования.ИмяРазреза(Разрез.Значение);
		ИмяРазреза = фин_РаботаСДополнительнымиРазрезамиБюджетирования.ИмяРазреза(Разрез.Значение);
		Если Найти(ИмяРазреза,"Разрез")=0 Тогда
			Продолжить;
		КонецЕсли;
		НомерРазреза = Сред(ИмяРазреза,СтрДлина("Разрез")+1);
		Элементы["Разрез"+НомерРазреза+"ТипИсточника"].Видимость 	= Истина;
		Элементы["Разрез"+НомерРазреза+"Источник"].Видимость 		= Истина;
		Элементы["Разрез"+НомерРазреза+"Обязательный"].Видимость 	= Истина;
		ПредставлениеРазреза =  фин_РаботаСДополнительнымиРазрезамиБюджетирования.ПредставлениеРазреза(Разрез.Значение);
		Элементы["Разрез"+НомерРазреза+"ТипИсточника"].Заголовок 	= ПредставлениеРазреза+": тип источника";
		Элементы["Разрез"+НомерРазреза+"Источник"].Заголовок 		= ПредставлениеРазреза+": источник";
		Элементы["Разрез"+НомерРазреза+"Обязательный"].Заголовок 	= ПредставлениеРазреза+": обязательный";
		ОбработанныеРазрезы.Добавить(ИмяРазреза);
	КонецЦикла;
	Для Инд=1 По 10 Цикл
		//Элементы["БюджетныеОперацииРазрез"+НомерРазреза]
		ИмяЭлемента = "Разрез"+Строка(Инд);
		Если ОбработанныеРазрезы.Найти(имяЭлемента)=Неопределено Тогда
			Элементы[ИмяЭлемента+"ТипИсточника"].Видимость 	= Ложь;
			Элементы[ИмяЭлемента+"Источник"].Видимость 		= Ложь;
			Элементы[ИмяЭлемента+"Обязательный"].Видимость 	= Ложь;
		КонецЕсли;
	КонецЦикла;
КонецПроцедуры

&НаКлиенте
Процедура ДетальныеНастройки(Команда)
	Элементы.ФормаДетальныеНастройки.Пометка = НЕ Элементы.ФормаДетальныеНастройки.Пометка;
	Элементы.ГруппаНастройки.Видимость = Элементы.ФормаДетальныеНастройки.Пометка;
КонецПроцедуры
