
Процедура ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	фин_ГруппыПравилОтраженияФактическихДанных.Ссылка
		|ИЗ
		|	Справочник.фин_ПравилаОтраженияФактическихДанных КАК фин_ГруппыПравилОтраженияФактическихДанных
		|ГДЕ
		|	фин_ГруппыПравилОтраженияФактическихДанных.Ссылка <> &Ссылка
		|	И фин_ГруппыПравилОтраженияФактическихДанных.ПометкаУдаления = ЛОЖЬ
		|	И фин_ГруппыПравилОтраженияФактическихДанных.Владелец = &Владелец
		|	И фин_ГруппыПравилОтраженияФактическихДанных.Порядок = &Порядок";
	
	Запрос.УстановитьПараметр("Владелец", Владелец);
	Запрос.УстановитьПараметр("Порядок", Порядок);
	Запрос.УстановитьПараметр("Ссылка", Ссылка);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
	
	Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
		Отказ = Истина;
		ОбщегоНазначенияКлиентСервер.СообщитьПользователю("Порядок применения правила уже используется в правиле "+ВыборкаДетальныеЗаписи.Ссылка);
		// Вставить обработку выборки ВыборкаДетальныеЗаписи
	КонецЦикла;
	

КонецПроцедуры

Процедура ПередЗаписью(Отказ)
	ПоФинансовомуПоказателю = ТипЗнч(Владелец)=Тип("СправочникСсылка.фин_ВидыДокументов") ИЛИ ТипЗнч(Владелец)=Тип("СправочникСсылка.фин_КлассификаторРегистров");
КонецПроцедуры

Процедура ПриЗаписи(Отказ)
	Если ПрогнозноеЗначение И НЕ ПометкаУдаления И НЕ фин_ОбщегоНазначенияВызовСервераПовтИсп.ИмеютсяПравилаРегистрацииПрогнозныхДанных() Тогда
		ОбновитьПовторноИспользуемыеЗначения();
	КонецЕсли;
КонецПроцедуры
