
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	//Вставить содержимое обработчика.
	ПараметрыФормы = Новый Структура("Отбор",Новый Структура("Ссылка",СписокПоказателей(ПараметрКоманды)));
	ОткрытьФорму("Справочник.фин_ФинансовыеПоказатели.ФормаСписка", ПараметрыФормы, ПараметрыВыполненияКоманды.Источник, ПараметрыВыполненияКоманды.Уникальность, ПараметрыВыполненияКоманды.Окно, ПараметрыВыполненияКоманды.НавигационнаяСсылка);
КонецПроцедуры

&НаСервере
Функция СписокПоказателей(Формула)
	Если НЕ ЗначениеЗаполнено(Формула) Тогда
		Возврат Новый Массив;
	КонецЕсли;
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	фин_ФинансовыеПоказатели.Ссылка
		|ИЗ
		|	Справочник.фин_ФинансовыеПоказатели КАК фин_ФинансовыеПоказатели
		|ГДЕ
		|	(фин_ФинансовыеПоказатели.Формула = &Формула
		|			ИЛИ фин_ФинансовыеПоказатели.ФормулаКоличество = &Формула)";
	
	Запрос.УстановитьПараметр("Формула", Формула);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Возврат РезультатЗапроса.Выгрузить().ВыгрузитьКолонку("Ссылка");
КонецФункции