
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	НастройкаДополнительныхРазрезовБюджетирования.Измерение,
		|	НастройкаДополнительныхРазрезовБюджетирования.Разрез
		|ИЗ
		|	РегистрСведений.фин_НастройкаДополнительныхРазрезовБюджетирования КАК НастройкаДополнительныхРазрезовБюджетирования";

	Результат = Запрос.Выполнить();

	Выборка = Результат.Выбрать();

	ОбработанныеРазрезы=Новый Массив;
	Пока Выборка.Следующий() Цикл
		ИмяРазреза = фин_ПроцедурыМеханизмовБюджетирования.ИмяРазреза(Выборка.Измерение);
		НомерРазреза = Сред(ИмяРазреза,СтрДлина("Разрез")+1);
		ЭтотОбъект["ТипРазреза"+НомерРазреза]=Выборка.Разрез;
		Элементы.Список.ПодчиненныеЭлементы["Разрез"+НомерРазреза].Заголовок = ?(СокрЛП(Выборка.Разрез.ПредставлениеДополнительногоРеквизита)="",Строка(Выборка.Разрез),Выборка.Разрез.ПредставлениеДополнительногоРеквизита);
		Элементы["ИспользоватьОтбор"+НомерРазреза].Заголовок = Элементы.Список.ПодчиненныеЭлементы["Разрез"+НомерРазреза].Заголовок;
		Элементы["ОтборРазрез"+НомерРазреза].ОграничениеТипа = Выборка.Разрез.ТипЗначения;
		ОбработанныеРазрезы.Добавить(ИмяРазреза);
	КонецЦикла;
	Для Инд=1 По 10 Цикл
		имяЭлемента = "Разрез"+Строка(Инд);
		Если ОбработанныеРазрезы.Найти(имяЭлемента)=Неопределено Тогда
			Элементы["Отбор"+Строка(Инд)].Видимость=Ложь;
			Элементы.Список.ПодчиненныеЭлементы[имяЭлемента].Видимость=Ложь;
		КонецЕсли;
	КонецЦикла;
    НастроитьОтбор();
КонецПроцедуры

&НаКлиенте
Процедура ИспользоватьОтбор1ПриИзменении(Элемент)
    НастроитьОтбор();
КонецПроцедуры

&НаСервере
Процедура НастроитьОтбор()
	Для Инд=1 По 10 Цикл
		Список.Параметры.УстановитьЗначениеПараметра("ИспользоватьОтбор"+Строка(Инд),ЭтотОбъект["ИспользоватьОтбор"+Строка(Инд)]);
		Список.Параметры.УстановитьЗначениеПараметра("ОтборРазрез"+Строка(Инд),ЭтотОбъект["ОтборРазрез"+Строка(Инд)]);
	КонецЦикла;
КонецПроцедуры
