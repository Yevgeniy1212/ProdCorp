////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ПодготовитьФормуНаСервере();
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ШАПКИ ФОРМЫ

&НаКлиенте
Процедура ПриходРасходПриИзменении(Элемент)
	
	Если Запись.ПриходРасход = ПредопределенноеЗначение("Перечисление.ден_ВидыДвиженийПриходРасход.Приход") Тогда
		Если ТипЗнч(Запись.ВидОперации) <> Тип("ПеречислениеСсылка.ден_ВидыОперацийПланируемоеПоступлениеДС") Тогда
			Запись.ВидОперации = ПредопределенноеЗначение("Перечисление.ден_ВидыОперацийПланируемоеПоступлениеДС.ПустаяСсылка");
		КонецЕсли;
	ИначеЕсли Запись.ПриходРасход = ПредопределенноеЗначение("Перечисление.ден_ВидыДвиженийПриходРасход.Расход") Тогда 
		Если ТипЗнч(Запись.ВидОперации) <> Тип("ПеречислениеСсылка.ден_ВидыОперацийЗаявкиНаРасходование") Тогда
			Запись.ВидОперации = ПредопределенноеЗначение("Перечисление.ден_ВидыОперацийЗаявкиНаРасходование.ПустаяСсылка");
		КонецЕсли;
	Иначе
		Запись.ВидОперации = Неопределено;
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ВидОперацииНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	
	ДанныеВыбора = Новый СписокЗначений;
	Если Запись.ПриходРасход = ПредопределенноеЗначение("Перечисление.ден_ВидыДвиженийПриходРасход.Приход") Тогда
		ЗаполнитьВидамиОперацийПриход(ДанныеВыбора);
	ИначеЕсли Запись.ПриходРасход = ПредопределенноеЗначение("Перечисление.ден_ВидыДвиженийПриходРасход.Расход") Тогда 
		ЗаполнитьВидамиОперацийРасход(ДанныеВыбора);
	КонецЕсли;
	
КонецПроцедуры


////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОМАНД ФОРМЫ

////////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ

&НаСервере
Процедура ПодготовитьФормуНаСервере()
	
	НадписьДанныеПланаДвиженияДС = Нстр("ru = 'Данные плана движения денежных средств'");
	НадписьРазрезыБюджетныхДанных = НСтр("ru = 'Разрезы бюджетных данных'");
	НадписьРезультирующиеДанныеБюджета = НСтр("ru = 'Результирующие данные бюджета'");
	
КонецПроцедуры

&НаСервереБезКонтекста
Процедура ЗаполнитьВидамиОперацийПриход(Список)
	
	Для Каждого ЗначениеПеречисления Из Метаданные.Перечисления.ден_ВидыОперацийПланируемоеПоступлениеДС.ЗначенияПеречисления Цикл
		Список.Добавить(Перечисления.ден_ВидыОперацийПланируемоеПоступлениеДС[ЗначениеПеречисления.Имя]);
	КонецЦикла;
	
КонецПроцедуры

&НаСервереБезКонтекста
Процедура ЗаполнитьВидамиОперацийРасход(Список)
	
	Для Каждого ЗначениеПеречисления Из Метаданные.Перечисления.ден_ВидыОперацийЗаявкиНаРасходование.ЗначенияПеречисления Цикл
		Список.Добавить(Перечисления.ден_ВидыОперацийЗаявкиНаРасходование[ЗначениеПеречисления.Имя]);
	КонецЦикла;
	
КонецПроцедуры


