
&НаКлиенте
Процедура СписокВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	БП = ВернутьБП(ВыбраннаяСтрока);
	
	Если ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеРеестров") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеРеестров.Форма.ФормаБизнесПроцесса", Новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.ЗаявкаНаКомандировку") Тогда
		ОткрытьФорму("БизнесПроцесс.ЗаявкаНаКомандировку.Форма.ФормаБизнесПроцесса", Новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.ВнутренниеПереводыПоЦА") Тогда
		ОткрытьФорму("БизнесПроцесс.ВнутренниеПереводыПоЦА.Форма.ФормаБизнесПроцесса", Новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеПлатежейПредставительств") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежейПредставительств.Форма.ФормаБизнесПроцесса", Новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеПлатежейПоЗакупу") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежейПоЗакупу.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеПлатежейПоФорвардномуЗакупу") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежейПоФорвардномуЗакупу.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеПлатежейПоФорвардномуЗакупуСХТП") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежейПоФорвардномуЗакупуСХТП.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.РасчетПоХранениюЗерна") Тогда
		ОткрытьФорму("БизнесПроцесс.РасчетПоХранениюЗерна.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
		
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеРеестровБезКурирующего") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеРеестровБезКурирующего.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	Иначе
		ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежей.Форма.ФормаБизнесПроцесса", Новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	КонецЕсли;
	
КонецПроцедуры

&НаСервереБезКонтекста
Функция ВернутьБП(Задача)
	возврат Задача.БизнесПроцесс;
КонецФункции	

&НаКлиенте
Процедура СписокПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа)
	Отказ = Ложь;	
КонецПроцедуры

&НаКлиенте
Процедура Создать(Команда)
	ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежей.ФормаОбъекта");	
КонецПроцедуры

&НаКлиенте
Процедура БизнесПроцессы(Команда)
	ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежей.ФормаСписка");
КонецПроцедуры

&НаСервере
Функция ПолучитьПлатежку(БП)
	   	//{{КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА
	// Данный фрагмент построен конструктором.
	// При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!

	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ПлатежноеПоручениеИсходящее.Ссылка
		|ИЗ
		|	Документ.ПлатежноеПоручениеИсходящее КАК ПлатежноеПоручениеИсходящее
		|ГДЕ
		|	ПлатежноеПоручениеИсходящее.ДокументОснование = &ДокументОснование";

	Запрос.УстановитьПараметр("ДокументОснование", БП);

	Результат = Запрос.Выполнить();

	ВыборкаДетальныеЗаписи = Результат.Выбрать();
     Рез = документы.ПлатежноеПоручениеИсходящее.ПустаяСсылка();
	 Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
		 Рез = ВыборкаДетальныеЗаписи.Ссылка;
		// Вставить обработку выборки ВыборкаДетальныеЗаписи
	КонецЦикла;

	//}}КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА

	Возврат Рез;
КонецФункции


&НаСервере
Процедура СоздатьПлатежкуНаКлиенте(БП,задача)
	ППИ = Документы.ПлатежноеПоручениеИсходящее.СоздатьДокумент();
	ППИ.ВидОперации = Перечисления.ВидыОперацийППИсходящее.ОплатаПоставщику;
	ЗаполнитьЗначенияСвойств(ППИ,БП,,"Номер,Дата");
	ППИ.ДокументОснование = БП;
	НС = ппи.РасшифровкаПлатежа.Добавить();
	НС.ДоговорКонтрагента = БП.ДоговорКонтрагента;
	ППИ.ВалютаДокумента = БП.Валютадокумента;
	НС.СуммаПлатежа = БП.СуммаДокумента;
	ППИ.Задача = задача;
	
	ППИ.ПолучитьФорму().Открыть();
КонецПроцедуры

&НаКлиенте
Процедура ПоказатьВыполненные(Команда)
	Если не ПоказыватьВыполненные тогда
		Элементы.ФормаПоказатьВыполненные.Заголовок = "Скрыть выполненные";
		ПоказыватьВыполненные = Истина;
	Иначе
		Элементы.ФормаПоказатьВыполненные.Заголовок = "Показать выполненные";
		ПоказыватьВыполненные = Ложь;
		
	КонецЕсли;  
	УстановитьОтбор(ЭтаФорма);	
	// Вставить содержимое обработчика.
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	установитьОтбор(Этаформа);
КонецПроцедуры

&НаКлиентеНаСервереБезКонтекста
Процедура установитьОтбор(Форма) 
	ОтборыСписковКлиентСервер.ИзменитьЭлементОтбораСписка(Форма.Список, "Выполнена", Ложь, не Форма.Показыватьвыполненные);	
КонецПроцедуры

&НаСервере
Процедура ПечатьРеестра(Команда)
	
	Отчеты.ЦС_РеестрЗаявокНаРасходованиеДенежныхСредств.ПолучитьФорму("Форма").Открыть();

КонецПроцедуры


&НаКлиенте
Процедура СписокВыбор1(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
		
	СтандартнаяОбработка = ложь;
	БП = ВернутьБП(ВыбраннаяСтрока);
		
	Если ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеРеестров") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеРеестров.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.ЗаявкаНаКомандировку") Тогда
		ОткрытьФорму("БизнесПроцесс.ЗаявкаНаКомандировку.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.ВнутренниеПереводыПоЦА") Тогда
		ОткрытьФорму("БизнесПроцесс.ВнутренниеПереводыПоЦА.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеПлатежейПредставительств") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежейПредставительств.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеПлатежейПоЗакупу") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежейПоЗакупу.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеПлатежейПоФорвардномуЗакупу") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежейПоФорвардномуЗакупу.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеПлатежейПоФорвардномуЗакупуСХТП") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежейПоФорвардномуЗакупуСХТП.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.СогласованиеРеестровБезКурирующего") Тогда
		ОткрытьФорму("БизнесПроцесс.СогласованиеРеестровБезКурирующего.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));	
		
	ИначеЕсли ТипЗнч(Элемент.ТекущиеДанные.БизнесПроцесс) = Тип("БизнесПроцессСсылка.РасчетПоХранениюЗерна") Тогда
		ОткрытьФорму("БизнесПроцесс.РасчетПоХранениюЗерна.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));	
		
	Иначе
		ОткрытьФорму("БизнесПроцесс.СогласованиеПлатежей.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	КонецЕсли;

КонецПроцедуры



