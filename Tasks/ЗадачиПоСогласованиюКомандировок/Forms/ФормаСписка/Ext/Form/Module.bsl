
&НаКлиенте
Процедура СписокВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	СтандартнаяОбработка = ложь;
	БП = ВернутьБП(ВыбраннаяСтрока);
	//Если ВыбраннаяСтрока.ТочкаМаршрута = ПредопределенноеЗначение("БизнесПроцесс.СогласованиеПлатежей.ТочкаМаршрута.СозданиеПП") тогда
	//	
	//	Платежка = ПолучитьПлатежку(БП);
	//	
	//	Если платежка.пустая() тогда
	//		СоздатьПлатежкуНаКлиенте(БП,ВыбраннаяСтрока);	
	//	Иначе
	//		ОткрытьЗначение(платежка);
	//	КонецЕсли;
	//	
	//Иначе
		ОткрытьФорму("БизнесПроцесс.ЗаявкаНаКомандировку.Форма.ФормаБизнесПроцесса", новый Структура("Ключ,Задача",ВернутьБП(ВыбраннаяСтрока),ВыбраннаяСтрока));
	//КонецЕсли;
КонецПроцедуры

&НаСервереБезКонтекста
Функция ВернутьБП(Задача)
	возврат Задача.БизнесПроцесс;
КонецФункции	

&НаКлиенте
Процедура СписокПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа)
	Отказ = Ложь;	
КонецПроцедуры

&НаКлиенте
Процедура Создать(Команда)
	ОткрытьФорму("БизнесПроцесс.ЗаявкаНаКомандировку.ФормаОбъекта");	
КонецПроцедуры

&НаКлиенте
Процедура БизнесПроцессы(Команда)
	ОткрытьФорму("БизнесПроцесс.ЗаявкаНаКомандировку.ФормаСписка");
КонецПроцедуры

&НаСервере
Функция ПолучитьПлатежку(БП)
	   	//{{КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА
	// Данный фрагмент построен конструктором.
	// При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!

	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ПлатежноеПоручениеИсходящее.Ссылка
		|ИЗ
		|	Документ.ПлатежноеПоручениеИсходящее КАК ПлатежноеПоручениеИсходящее
		|ГДЕ
		|	ПлатежноеПоручениеИсходящее.ДокументОснование = &ДокументОснование";

	Запрос.УстановитьПараметр("ДокументОснование", БП);

	Результат = Запрос.Выполнить();

	ВыборкаДетальныеЗаписи = Результат.Выбрать();
     Рез = документы.ПлатежноеПоручениеИсходящее.ПустаяСсылка();
	 Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
		 Рез = ВыборкаДетальныеЗаписи.Ссылка;
		// Вставить обработку выборки ВыборкаДетальныеЗаписи
	КонецЦикла;

	//}}КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА

	Возврат Рез;
КонецФункции


&НаКлиенте
Процедура ПоказатьВыполненные(Команда)
	Если не ПоказыватьВыполненные тогда
		Элементы.ФормаПоказатьВыполненные.Заголовок = "Скрыть выполненные";
		ПоказыватьВыполненные = Истина;
	Иначе
		Элементы.ФормаПоказатьВыполненные.Заголовок = "Показать выполненные";
		ПоказыватьВыполненные = Ложь;
		
	КонецЕсли;  
	УстановитьОтбор(ЭтаФорма);	
	// Вставить содержимое обработчика.
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	установитьОтбор(Этаформа);
КонецПроцедуры

&НаКлиентеНаСервереБезКонтекста
Процедура установитьОтбор(Форма) 
	ОтборыСписковКлиентСервер.ИзменитьЭлементОтбораСписка(Форма.Список, "Выполнена", Ложь, не Форма.Показыватьвыполненные);	
КонецПроцедуры

