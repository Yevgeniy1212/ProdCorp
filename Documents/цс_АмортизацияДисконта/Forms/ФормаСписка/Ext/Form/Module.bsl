

&НаКлиенте
// Процедура отрабатывает печать движений документа по регистрам.
//
Процедура ОсновныеДействияФормыНастройка(Кнопка)
	Если ТипЗнч(Элементы.Список.ТекущаяСтрока) <> Тип("ДокументСсылка.цс_АмортизацияДисконта") тогда
		Возврат
	КонецЕсли;
    
	ОбщегоНазначения.РучнаяКорректировкаОсновнаяФорма(Ложь,Элементы.Список.ТекущаяСтрока, Истина);
    	
КонецПроцедуры

&НаКлиенте
// Процедура выполняет открытие формы работы со свойствами документа
//
Процедура ДействияФормыДействиеОткрытьСвойства(Кнопка)
	
	Если ТипЗнч(Элементы.Список.ТекущаяСтрока) <> Тип("ДокументСсылка.цс_АмортизацияДисконта") тогда
		Возврат
	КонецЕсли;
	
	РаботаСДиалогами.ОткрытьСвойстваДокумента(Элементы.Список.ТекущаяСтрока, ЭтаФорма);

КонецПроцедуры // ДействияФормыДействиеОткрытьСвойства()

&НаКлиенте
// Процедура выполняет открытие формы работы с категориями документа
//
Процедура ДействияФормыДействиеОткрытьКатегории(Кнопка)
	
	Если ТипЗнч(Элементы.Список.ТекущаяСтрока) <> Тип("ДокументСсылка.цс_АмортизацияДисконта") тогда
		Возврат
	КонецЕсли;

	РаботаСДиалогами.ОткрытьКатегорииДокумента(Элементы.Список.ТекущаяСтрока, ЭтаФорма);

КонецПроцедуры // ДействияФормыДействиеОткрытьКатегории()

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если НЕ УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(ЦС_ОбщегоНазначенияКлиентСерверПовтИсп.ТекущийПользователь(), "УчетПоВсемОрганизациям") Тогда // Установлен режим учета по одной организации
         Список.Отбор.Элементы.Очистить();
         Поле = Список.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
         Поле.ЛевоеЗначение  = Новый ПолеКомпоновкиДанных("Организация");
		 Поле.ВидСравнения   = ВидСравненияКомпоновкиДанных.Равно;
		 Поле.ПравоеЗначение = УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(ЦС_ОбщегоНазначенияКлиентСерверПовтИсп.ТекущийПользователь(), "ОсновнаяОрганизация");
	КонецЕсли;

КонецПроцедуры

